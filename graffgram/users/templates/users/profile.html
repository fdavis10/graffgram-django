{% extends 'blog/base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/profile.css' %}">
{% endblock extra_css %}

{% block title %}–ü—Ä–æ—Ñ–∏–ª—å{% endblock title %}

{% block content %}
<div class="profile-container">
    <div class="profile-card">
        <div class="avatar-container">
            {% if user.image %}
                <img class="profile-avatar" src="{{ user.image.url }}" alt="–ê–≤–∞—Ç–∞—Ä">
            {% else %}
                <img class="profile-avatar" src="{% static 'default.webp' %}" alt="–ê–≤–∞—Ç–∞—Ä">
            {% endif %}
        </div>
        <h2 class="username">{{ user.username }}</h2>
        <p class="email">üìß {{ user.email }}</p>
        <p class="post-count">üìù –ü–æ—Å—Ç–æ–≤: {{ post_count }}</p>
        <form method="post" enctype="multipart/form-data" class="profile-form">
            {% csrf_token %}
            <label for="id_image" class="upload-label">üì∑ –ò–∑–º–µ–Ω–∏—Ç—å –∞–≤–∞—Ç–∞—Ä:</label>
            <input type="file" name="image" id="id_image" accept="image/*" class="upload-input">
            <button type="submit" class="edit-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </form>
        {% comment %} <form method="post" enctype="multipart/form-data" class="profile-form">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="edit-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </form> {% endcomment %}
    </div>

    <div class="posts-section">
        <h3>–ü–æ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
        <div class="posts-grid">
            {% for post in posts %}
                <div class="post-card">
                    <a href="{{post.get_absolute_url}}">
                        <img src="{{ post.image.url }}" class="post-image">
                        <p class="post-description">{{ post.description }}</p>
                        <span class="post-date">üìÖ {{ post.publish }}</span>
                    </a>
                </div>
            {% empty %}
                <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤.</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
